spring.mvc.pathmatch.matching-strategy=ant_path_matcher

# Application Configuration
spring.application.name=personal-finance

# Database Configuration - finance schema
# IMPORTANT: Database credentials MUST be set via environment variables
# Set DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD in backend/.env file
spring.jpa.hibernate.ddl-auto=update
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# Connection Pool Configuration
spring.datasource.tomcat.initial-size=15
spring.datasource.tomcat.max-wait=20000
spring.datasource.tomcat.max-active=50
spring.datasource.tomcat.max-idle=15
spring.datasource.tomcat.min-idle=8
spring.datasource.tomcat.default-auto-commit=true

# JPA Configuration
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Logging Configuration
logging.level.org.hibernate=error
logging.level.com.finance=debug
logging.level.org.springframework.web=info

# Server Configuration
server.port=8080
server.servlet.context-path=/api

# Jackson Configuration - Serialize LocalDate as String instead of array
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.date-format=yyyy-MM-dd

# Claude API Configuration
claude.api.key=${CLAUDE_API_KEY:}
claude.api.url=https://api.anthropic.com/v1/messages
claude.api.model=claude-3-5-sonnet-20241022
claude.api.max-tokens=4096

# Spring Boot DevTools Configuration (Hot Reload)
# IMPORTANT: Restart disabled due to Apache POI ClassLoader incompatibility
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=true
# Exclude static resources from restart to improve performance
spring.devtools.restart.exclude=static/**,public/**,META-INF/resources/**

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,env
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Backup Webhook Configuration
backup.webhook.url=${BACKUP_WEBHOOK_URL:http://backup:5000}
